---
import Head from '../components/layout/Head.astro';
import Header from '../components/layout/Header.astro';
import Footer from '../components/layout/Footer.astro';
export interface Props {
  title: string;
}
const { title } = Astro.props;

// Check if this is an embedded view
const isEmbedded = Astro.url.searchParams.get('iframe') === 'true' || Astro.url.searchParams.get('embed') === 'true';

import '/src/styles/main.scss';
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <Head title={title} />
    <!-- Google Tag Manager -->
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', 'GTM-WVWLDBQM');
    </script>
    <!-- End Google Tag Manager -->
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WVWLDBQM" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    {!isEmbedded && <Header />}
    <!-- START container main-content -->
    <div id="page-content" class="container main-content">
      <slot />
    </div>

    {!isEmbedded && <Footer />}
    <script>
      // Astro will bundle and process this automatically
      import 'bootstrap/dist/js/bootstrap.bundle.min.js';
    </script>
    <script src="../assets/scripts/iframe-resize.js"></script>
  </body>
</html>
